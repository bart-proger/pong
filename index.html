<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ping-Pong</title>

  <style type="text/css">
    body {
      background: black;
    }
    canvas {
      padding: 100px 150px;
      border: 0;
    }
  </style>
</head>

<body>
  <script src="graphics.js"></script>
  <script src="sprite.js"></script>
  <script>
    createCanvas(600, 400, "black");
  </script>
  <script src="geometry.js"></script>
  <script src="utils.js"></script>
  <script src="game_object.js"></script>
  <script src="game.js"></script>
  <script src="input.js"></script>
  <script src="controller.js"></script>
  <script src="collider.js"></script>
  <script src="box_collider.js"></script>

  <script src="game/player_controller.js"></script>
  <script src="game/ball.js"></script>
  <script src="game/racket.js"></script>

  <script>
    //var input = new Input();
    var game = new Game();
    //game.isDebug = true;

    var ball = new Ball(width / 2, height / 2);
    var racketLeft = new Racket("racket-left", 50, height/2);
    racketLeft.collider.box.y -= racketLeft.collider.box.h / 4;
    racketLeft.collider.box.w /= 2;
    racketLeft.collider.box.x = -racketLeft.collider.box.w;

    var racketRight = new Racket("racket-right", width - 50, height/2);
    racketRight.collider.box.y -= racketRight.collider.box.h / 4;
    racketRight.collider.box.w /= 2;
    racketRight.collider.box.x = 0;
    racketRight.sprite = new Sprite(81, 0, 47, 121, 1, 1);

    racketLeft.controller = new PlayerController(racketLeft);
    racketRight.controller = new PlayerController(racketRight);

    game.addObject(new GameObject("top", width/2, -10/2, width, 10));
    game.addObject(new GameObject("bottom", width/2, height + 10/2, width, 10));
    game.addObject(new GameObject("left", -10/2, height/2, 10, height));
    game.addObject(new GameObject("right", width + 10/2, height/2, 10, height));

    game.addObject(racketLeft);
    game.addObject(racketRight);
    game.addObject(ball);

    var frame = function(dt) {
      game.update();
      clear();
      color('green');
      fillRect(0, 0, width, height);
      game.draw();
    };
    setInterval(frame, 16);
    /*
    canvas.onmousemove = function(event) {
      player1.y = event.clientY - PLAYER_HEIGHT / 2;
    };
    */
  </script> 
</body>

</html>